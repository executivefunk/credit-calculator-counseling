<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Weekly Credit Calculator</title>
  <link rel="manifest" href="manifest.json">
  <style>
/* Base Layout */
html, body {
  font-size: clamp(14px, 2.5vw, 16px);
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  height: 100%;
  box-sizing: border-box;
}

/* Default container (desktop and up) */
.container {
  max-width: 500px;
  margin: 0 auto;
  background: white;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  box-sizing: border-box;
}
/* Headings and Labels */
h2 {
  text-align: center;
}

label {
  display: block;
  margin-top: 15px;
}

/* Form Elements */
input[type="number"],
select {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
  border-radius: 6px;
  border: 1px solid #ccc;
  box-sizing: border-box;
}

/* Checkbox Groups */
.checkbox-container {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: 10px;
}

/* Output / Messages */
.output {
  margin-top: 20px;
  padding: 10px;
  background: #eef;
  border-radius: 6px;
}

.warning {
  background: #ffeeba;
  padding: 10px;
  border-radius: 6px;
  margin-top: 10px;
  border: 1px solid #f0ad4e;
}

.disclaimer {
  background: #fff89a;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #ffeeba;
  margin-top: 10px;
  font-size: 0.95em;
}

.footer-disclaimer {
  margin-top: 20px;
  font-size: 0.9em;
  color: #555;
  text-align: center;
}

/* Buttons */
.plan-buttons {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 20px;
}

.plan-buttons button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Holiday Options */
.holiday-box {
  background-color: #e0f8e9;
  border: 1px solid #b6e2c4;
  border-radius: 8px;
  padding: 10px 15px 15px;
  margin-top: 15px;
}

.holiday-option {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
  font-size: 16px;
}

.holiday-option input[type="checkbox"] {
  margin-right: 10px;
  transform: scale(1.2);
}

.holiday-option label {
  white-space: nowrap;
  position: relative;
  top: -5px;
}

/* Language Prompt Box */
#languagePrompt > .prompt-container {
  display: flex;
  flex-direction: column;
  gap: 20px;
  max-width: 500px;
  width: 100%;
  background: white;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  box-sizing: border-box;
}
#languagePrompt {
  transition: opacity 0.4s ease;
}

    /* Responsive Tweaks */
/* Responsive Tweaks */
@media (max-width: 768px) {
  html, body {
    font-size: 15px !important;
  }

  h2 {
    font-size: 1.6em !important;
  }
  .container {
    padding: 10px !important;
  }

  label,
  .holiday-option label,
  .disclaimer,
  .warning,
  .footer-disclaimer,
  .output {
    font-size: 0.95em !important;
  }

  input[type="number"],
  select {
    padding: 14px !important;
    font-size: 1.2em !important;
  }

  button,
  #langToggleBtn {
    font-size: 0.96em !important;
    padding: 12.8px !important;
    border-radius: 6px;
  }

  .plan-buttons button {
    font-size: 1.2em !important;
    padding: 16px !important;
  }

  .holiday-option input[type="checkbox"] {
    transform: scale(1.5) !important;
    margin-right: 10px;
  }

  .holiday-option label {
    font-size: 0.85em !important; /* ‚úÖ Reduce font size */
    white-space: nowrap;          /* ‚úÖ Prevent wrapping */
    max-width: 100%;
  }

  .holiday-box {
    font-size: 0.95em;            /* Optional: shrink whole box text */
  }

  #languagePrompt .prompt-container {
    font-size: 1.2em;
  }

  #languagePrompt .prompt-container > div > div {
    font-size: 1.3em !important;
    padding: 18px !important;
  }

  #languagePrompt .prompt-container span {
    font-size: 1.1em !important;
  }

  body.spanish-mode .holiday-option label {
    font-size: 0.75em;
    line-height: 1.1em;
  }
}
  #printButton {
  position: fixed;
  top: 16px;
  right: 16px;
  background-color: white;
  color: black;
  border: 1px solid black;
  padding: 10px 16px;
  font-size: 1.1em;
  border-radius: 6px;
  cursor: pointer;
  z-index: 999;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  transition: background-color 0.3s, color 0.3s;
}

#printButton:hover {
  background-color: #555;
  color: white;
}

@media print {
  #printButton {
    display: none;
  }
}

/* ‚úÖ This MUST be outside the above block */
@media print {
  body {
    background: white !important;
    margin: 0;
    padding: 0;
  }

  .container {
    max-width: 100% !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    padding: 20px !important;
  }

  .print-page-1 {
    page-break-after: always;
  }

  #langToggleBtn,
  #languagePrompt {
    display: none !important;
  }
   table, tr, td, th {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }
  @media print {
  .force-page-break {
    page-break-before: always !important;
  }
}
</style>
</head>
<body>

 <div id="languagePrompt" style="display: none; justify-content: center; padding-top: 20px;">
  <div class="prompt-container">
    <div>
      <p style="text-align: center; font-weight: bold; font-size: 1.8em; margin-bottom: 20px;">
        Weekly Credit Calculator
      </p>

      <div onclick="setLanguage(false)" style="
  background-color: #fff89a;
  color: #333;
  text-align: center;
  padding: 12.8px !important;
  font-size: 1.28em !important;
  cursor: pointer;
  border-radius: 6.4px !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  margin-top: 10px;
">
  <strong>English - Ingl√©s</strong><br>
  <span style="font-size: 0.64em !important;">Click Here</span>
</div>

<div onclick="setLanguage(true)" style="
  background-color: #fff89a;
  color: #333;
  text-align: center;
  padding: 12.8px !important;
  font-size: 1.28em !important;
  cursor: pointer;
  border-radius: 6.4px !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  margin-top: 10px;
">
  <strong>Espa√±ol - Spanish</strong><br>
  <span style="font-size: 0.64em !important;">Click Here</span>
</div>
    </div>
  </div>
</div>
  
  <button onclick="window.print()" id="printButton" title="Print this page">Print</button>

  <!-- Actual calculator container (hidden at first) -->
  <div class="container">
  <div style="text-align: center; margin-bottom: 10px;">
    <button id="langToggleBtn" onclick="showLanguagePrompt()">Espa√±ol</button>
  </div>

  <div class="print-page-1">
    <h2>Weekly Credit Calculator</h2>
    <p id="currentDate" style="text-align: center; font-weight: bold; margin-top: -10px;"></p>
    <p id="currentWeek" style="text-align: center; font-size: 1.1em; margin-bottom: 15px;"></p>

    <div id="mainDisclaimer" class="disclaimer" style="margin-bottom: 15px;">
      This calculator is designed for students who plan to graduate this school year.
      <br><br>
      If you‚Äôre planning to graduate next year or later, you can still use it to set a credit goal for the school year or semester.
      <br><br>
      Talk with your teacher to decide how many credits to aim for, then use that number in the calculator.
    </div>

    <label for="totalCredits">How many credits do you need to finish?</label>
    <input type="number" id="totalCredits" min="1" max="100" required>

    <label for="startWeek">What week are you starting from?</label>
    <select id="startWeek"></select>

    <label for="endWeek">Which week do you want to finish by?</label>
    <select id="endWeek"></select>

    <div class="holiday-box">
      <p id="skipBoxTitle" style="
  text-align: center;
  font-weight: bold;
  margin: 0 0 12px;
">
  Weeks You Plan to Skip (Optional):
</p>

      <div class="holiday-option">
        <input type="checkbox" id="skipThanksgiving">
        <label for="skipThanksgiving">Skip Thanksgiving Week (Week 22)</label>
      </div> 
      <div class="holiday-option">
        <input type="checkbox" id="skipWinter">
        <label for="skipWinter">Skip Winter Break (Weeks 26‚Äì27)</label>
      </div>
      <div class="holiday-option">
        <input type="checkbox" id="skipSpring">
        <label for="skipSpring">Skip Spring Week (Week 41)</label>
      </div>
      <hr style="margin: 10px 0;">

      <div class="holiday-option">
        <input type="checkbox" id="customSkip1">
        <select id="customWeek1"></select>
      </div>
      <div class="holiday-option">
       <input type="checkbox" id="customSkip2">
       <select id="customWeek2"></select>
      </div>
      <div class="holiday-option">
       <input type="checkbox" id="customSkip3">
       <select id="customWeek3"></select>
      </div>
      <div class="holiday-option">
      <input type="checkbox" id="customSkip4">
      <select id="customWeek4"></select>
      </div>
    </div>

    <button onclick="calculateCredits()" id="calculateBtn" style="margin-top: 20px; width: 100%; padding: 10px;">Calculate</button>
  </div>

  <div class="print-page-2">
    <div class="output" id="result"></div>

    <div class="plan-buttons" id="planButtons" style="display: none;">
      <button onclick="generatePlan('A')">üü¢ Open Plan A</button>
      <button onclick="generatePlan('B')">üü° Open Plan B</button>
      <button onclick="generatePlan('C')">üîµ Open Plan C</button>
      <button onclick="generatePlan('D')">üî¥ Open Plan D</button>
    </div>

    <div class="footer-disclaimer" id="footerDisclaimer">
      <strong>Disclaimer:</strong> This calculator is a helpful planning tool, but it's important to double-check your credit totals and the number of weeks you have. If you're not sure, talk with your teacher or school counselor to go over your plan.
    </div>
  </div>
  </div>

  <script>

    try {
} catch (e) {
  alert("Script error: " + e.message);
}
    let isSpanish = false;
    function getText(key) {
  const map = {
    "Credits Needed": ["Credits Needed", "Cr√©ditos Necesarios"],
    "Weeks Remaining": ["Weeks Remaining", "Semanas Restantes"],
    "Average Credits per Week": ["Average Credits per Week", "Promedio de Cr√©ditos por Semana"],
    "Risk Level": ["Risk Level", "Nivel de Riesgo"],
    "Suggestion": ["Suggestion", "Sugerencia"],
    "Workflow Options": ["Workflow Options", "Opciones de Planificaci√≥n"],
    "‚úÖ Low Risk": ["‚úÖ Low Risk", "‚úÖ Riesgo Bajo"],
    "‚ö†Ô∏è Medium Risk": ["‚ö†Ô∏è Medium Risk", "‚ö†Ô∏è Riesgo Medio"],
    "‚ö†Ô∏è Medium‚ÄìHigh Risk": ["‚ö†Ô∏è Medium‚ÄìHigh Risk", "‚ö†Ô∏è Riesgo Medio‚ÄìAlto"],
    "‚ö†Ô∏è High Risk ‚Äì Near Limit": ["‚ö†Ô∏è High Risk ‚Äì Near Limit", "‚ö†Ô∏è Riesgo Alto ‚Äì Cerca del l√≠mite"],
    "üö® High Risk": ["üö® High Risk", "üö® Riesgo Alto"],
    "‚úÖ You‚Äôre on track! Aim to turn in 2 credits a week to stay steady and finish on time.": [
      "‚úÖ You‚Äôre on track! Aim to turn in 2 credits a week to stay steady and finish on time.",
      "‚úÖ ¬°Vas bien! Intenta entregar 2 cr√©ditos por semana para mantenerte al d√≠a y terminar a tiempo."
    ],
    "‚ö†Ô∏è You‚Äôll need to do a bit more than 2 each week. Try turning in 3 credits weekly to get ahead and lower your weekly credit load.": [
      "‚ö†Ô∏è You‚Äôll need to do a bit more than 2 each week. Try turning in 3 credits weekly to get ahead and lower your weekly credit load.",
      "‚ö†Ô∏è Necesitar√°s hacer un poco m√°s de 2 por semana. Intenta entregar 3 cr√©ditos por semana para avanzar y reducir tu carga semanal."
    ],
    "‚ö†Ô∏è You‚Äôre getting close to the weekly credit limit of 3. Try turning in 3 credits a week now so you can lower your credit load and avoid burnout later.": [
      "‚ö†Ô∏è You‚Äôre getting close to the weekly credit limit of 3. Try turning in 3 credits a week now so you can lower your credit load and avoid burnout later.",
      "‚ö†Ô∏è Est√°s cerca del l√≠mite semanal de 3 cr√©ditos. Entrega 3 por semana ahora para reducir tu carga y evitar agotarte m√°s adelante."
    ],
    "‚ö†Ô∏è You‚Äôre getting very close to the weekly credit limit of 3. Try turning in 3 credits a week now so you can lower your credit load.": [
      "‚ö†Ô∏è You‚Äôre getting very close to the weekly credit limit of 3. Try turning in 3 credits a week now so you can lower your credit load.",
      "‚ö†Ô∏è Muy cerca del l√≠mite semanal de 3 cr√©ditos. Entrega 3 por semana para bajar tu carga."
    ],
    "üö® This plan needs 3 or more credits every week without any breaks. That‚Äôs a challenging pace, and most students need extra support to manage it. Talk with your teacher to build a plan that works for you and gives you backup options.": [
      "üö® This plan needs 3 or more credits every week without any breaks. That‚Äôs a challenging pace, and most students need extra support to manage it. Talk with your teacher to build a plan that works for you and gives you backup options.",
      "üö® Este plan requiere 3 o m√°s cr√©ditos cada semana sin descansos. Es dif√≠cil de mantener, y la mayor√≠a de estudiantes necesitan apoyo extra. Habla con tu maestro para armar un plan realista y con respaldo."
    ],
    "Strong Start Tip: Try completing 3 credits/week for the first 6 weeks. You can slow down later.": [
  "Strong Start Tip: Try completing 3 credits/week for the first 6 weeks. You can slow down later.",
  "Consejo para un buen comienzo: Intenta completar 3 cr√©ditos/semana durante las primeras 6 semanas. Despu√©s puedes bajar el ritmo."
],

"bufferWarning44": [
  "‚ö†Ô∏è Heads up: You‚Äôre planning to finish right at the deadline. Try to finish by Week 44 or earlier to give yourself a buffer in case anything unexpected comes up.",
  "‚ö†Ô∏è Aviso: Est√°s planeando terminar justo en la fecha l√≠mite. Intenta terminar para la Semana 44 o antes para darte un margen por si surge algo inesperado."
],
"bufferWarning45": [
  "‚ö†Ô∏è Heads up: You‚Äôre planning to finish really close to the deadline. Try to finish by Week 44 or earlier to give yourself a buffer in case anything unexpected comes up.",
  "‚ö†Ô∏è Aviso: Est√°s planeando terminar muy cerca de la fecha l√≠mite. Intenta terminar para la Semana 44 o antes para darte un margen por si surge algo inesperado."
],
"bufferWarningAfter46": [
  "‚ö†Ô∏è Heads up: Week 46 is the last week to turn in credits to walk in the graduation ceremony. You‚Äôve selected a week after that ‚Äî talk with your teacher to make sure your plan still works.",
  "‚ö†Ô∏è Aviso: La Semana 46 es la √∫ltima semana para entregar cr√©ditos y participar en la ceremonia de graduaci√≥n. Has seleccionado una semana posterior ‚Äî habla con tu maestro para asegurarte de que tu plan a√∫n funcione."
],
    "Plan A": ["Plan A", "Plan A"],
"Plan B": ["Plan B", "Plan B"],
"Plan C": ["Plan C", "Plan C"],
"Plan D (Special Approval Needed)": ["Plan D (Special Approval Needed)", "Plan D (Se Requiere Aprobaci√≥n Especial)"],

"credits_per_week_for_weeks": ["{x} credits/week for {y} weeks", "{x} cr√©ditos/semana por {y} semanas"],
"exceeds_weeks_by": ["(Exceeds weeks left by {z})", "(Excede las semanas restantes por {z})"],
"you_need_segments": ["(You need {segments} to stay within your available weeks)", "(Necesitas {segments} para mantenerte dentro de tus semanas disponibles)"],

"weeks_of_x_credits": ["{count} week(s) of {credit} credit(s)", "{count} semana(s) de {credit} cr√©dito(s)"],

"can_afford_1_credit": [
  "You can afford up to {count} week(s) at 1 credit if the rest average 2+",
  "Puedes tener hasta {count} semana(s) de 1 cr√©dito si el resto promedia 2 o m√°s"
],

"plan_d_header": [
  "Plan D (Special Approval Needed): 3/week for 8 weeks (to unlock 4 credits a week max)",
  "Plan D (Se Requiere Aprobaci√≥n Especial): 3/semana por 8 semanas (para desbloquear hasta 4 cr√©ditos por semana)"
],
"then_x_weeks_of_4": ["then {x} week(s) of 4/week", "luego {x} semana(s) de 4/semana"],
"plus_1_week_of_n": ["+ 1 week of {n} credit(s)", "+ 1 semana de {n} cr√©dito(s)"],
"weeks_total": ["({x} weeks total)", "({x} semanas en total)"],
    "plan_c_exactly_2": [
  "You can afford 0 week(s) at 1 credit if the rest average 2+",
  "Puedes tener 0 semana(s) de 1 cr√©dito si el resto promedia 2 o m√°s"
],
"plan_c_less_than_2": [
  "You can afford up to {count} week(s) at 1 credit if the rest average 2+",
  "Puedes tener hasta {count} semana(s) de 1 cr√©dito si el resto promedia 2 o m√°s"
],
"plan_c_more_than_2": [
  "You can afford 0 week(s) at 1 credit",
  "Puedes tener 0 semana(s) de 1 cr√©dito"
],
    "Weeks You Plan to Skip (Optional):": [
  "Weeks You Plan to Skip (Optional):",
  "Semanas que Planeas Omitir (Opcional):"
]

  };
  return isSpanish ? map[key]?.[1] ?? key : map[key]?.[0] ?? key;
}

const translations = {
  "Weekly Credit Calculator": "Calculadora de Cr√©ditos Semanales",
  "How many credits do you need to finish?": "¬øCu√°ntos cr√©ditos necesitas completar?",
  "What week are you starting from?": "¬øDesde qu√© semana comienzas?",
  "Which week do you want to finish by?": "¬øEn qu√© semana quieres terminar?",
  "Skip Thanksgiving Week (Week 22)": "Saltar semana - Acci√≥n de Gracias (Semana 22)",
  "Skip Winter Break (Weeks 26‚Äì27)": "Saltar vacaciones - Invierno (Semanas 26‚Äì27)",
  "Skip Spring Week (Week 41)": "Saltar semana - Primavera (Semana 41)",
  "Calculate": "Calcular",
  "Disclaimer:": "Aviso:",
  "This calculator is a helpful planning tool, but it's important to double-check your credit totals and the number of weeks you have. If you're not sure, talk with your teacher or school counselor to go over your plan.": "Esta calculadora es una herramienta √∫til para planificar, pero es importante verificar tus cr√©ditos y el n√∫mero de semanas. Si no est√°s seguro, habla con tu maestro o consejero escolar.",
  "This calculator is designed for students who plan to graduate this school year.": "Esta calculadora est√° dise√±ada para estudiantes que planean graduarse este a√±o escolar.",
  "If you‚Äôre planning to graduate next year or later, you can still use it to set a credit goal for the school year or semester.": "Si planeas graduarte el pr√≥ximo a√±o o despu√©s, a√∫n puedes usarla para establecer una meta de cr√©ditos para el a√±o o semestre.",
  "Talk with your teacher to decide how many credits to aim for, then use that number in the calculator.": "Habla con tu maestro para decidir cu√°ntos cr√©ditos necesitas, luego usa ese n√∫mero en la calculadora.",
    "Credits Needed": "Cr√©ditos necesarios",
  "Weeks Remaining": "Semanas restantes",
  "Average Credits per Week": "Promedio de cr√©ditos por semana",
  "Risk Level": "Nivel de riesgo",
  "Suggestion": "Sugerencia",
  "‚ö†Ô∏è Heads up: You‚Äôre planning to finish right at the deadline. Try to finish by Week 44 or earlier to give yourself a buffer in case anything unexpected comes up.": "‚ö†Ô∏è Aviso: Est√°s planeando terminar justo en la fecha l√≠mite. Intenta terminar para la Semana 44 o antes para darte un margen por si surge algo inesperado.",
  "‚ö†Ô∏è Heads up: Week 46 is the last week to turn in credits to walk in the graduation ceremony. You‚Äôve selected a week after that ‚Äî talk with your teacher to make sure your plan still works.": "‚ö†Ô∏è Aviso: La Semana 46 es la √∫ltima semana para entregar cr√©ditos y participar en la ceremonia de graduaci√≥n. Has seleccionado una semana posterior ‚Äî habla con tu maestro para asegurarte de que tu plan a√∫n funcione.",

  "mainDisclaimerFull": `This calculator is designed for students who plan to graduate this school year.<br><br>If you‚Äôre planning to graduate next year or later, you can still use it to set a credit goal for the school year or semester.<br><br>Talk with your teacher to decide how many credits to aim for, then use that number in the calculator.`,

  "mainDisclaimerFull_ES": `Esta calculadora est√° dise√±ada para estudiantes que planean graduarse este a√±o escolar.<br><br>Si planeas graduarte el pr√≥ximo a√±o o despu√©s, igual puedes usarla para establecer una meta de cr√©ditos para el a√±o o semestre escolar.<br><br>Habla con tu maestro para decidir cu√°ntos cr√©ditos deber√≠as completar y usa ese n√∫mero en la calculadora.`,

  "footerDisclaimerFull": `<strong>Disclaimer:</strong> This calculator is a helpful planning tool, but it's important to double-check your credit totals and the number of weeks you have. If you're not sure, talk with your teacher or school counselor to go over your plan.`,

  "footerDisclaimerFull_ES": `<strong>Aviso:</strong> Esta calculadora es una herramienta √∫til para planificar, pero es importante verificar tus cr√©ditos totales y cu√°ntas semanas tienes.<br>Si no est√°s seguro, habla con tu maestro o consejero escolar para revisar tu plan.`,

};

    const dateRanges = [
  "", "July 1 - July 4", "July 7 - July 11", "July 14 - July 18", "July 21 - July 25",
  "July 28 - Aug 1", "Aug 4 - Aug 8", "Aug 11 - Aug 15", "Aug 18 - Aug 22", "Aug 25 - Aug 29",
  "Sept 1 - Sept 5", "Sept 8 - Sept 12", "Sept 15 - Sept 19", "Sept 22 - Sept 26", "Sept 29 - Oct 3",
  "Oct 6 - Oct 10", "Oct 13 - Oct 17", "Oct 20 - Oct 24", "Oct 27 - Oct 31", "Nov 3 - Nov 7",
  "Nov 10 - Nov 14", "Nov 17 - Nov 21", "Nov 24 - Nov 28", "Dec 1 - Dec 5", "Dec 8 - Dec 12",
  "Dec 15 - Dec 19", "Dec 22 - Dec 26 (Winter Break)", "Dec 29 - Jan 2 (Winter Break)", "Jan 5 - Jan 9",
  "Jan 12 - Jan 16", "Jan 19 - Jan 23 - End of Semester 1", "Jan 26 - Jan 30", "Feb 2 - Feb 6",
  "Feb 9 - Feb 13", "Feb 16 - Feb 20", "Feb 23 - Feb 27", "Mar 2 - Mar 6", "Mar 9 - Mar 13",
  "Mar 16 - Mar 20", "Mar 23 - Mar 27", "Mar 30 - Apr 3", "Apr 6 - Apr 10", "Apr 13 - Apr 17",
  "Apr 20 - Apr 24", "Apr 27 - May 1", "May 4 - May 8", "May 11- May 15 (Graduation Credit Deadline - May 15)",
  "May 18 - May 22", "May 25 - May 29", "June 1 - June 5", "June 8 - June 12", "June 15 - June 19",
  "June 22 - June 26 - End of Semester 2", "June 29 - June 30"
];

// ‚úÖ Define weeks array globally (outside any function)
const weeks = [
  ["July 1 - July 4", "1‚Äì4 de julio"],
  ["July 7 - July 11", "7‚Äì11 de julio"],
  ["July 14 - July 18", "14‚Äì18 de julio"],
  ["July 21 - July 25", "21‚Äì25 de julio"],
  ["July 28 - Aug 1", "28 de julio‚Äì1 de agosto"],
  ["Aug 4 - Aug 8", "4‚Äì8 de agosto"],
  ["Aug 11 - Aug 15", "11‚Äì15 de agosto"],
  ["Aug 18 - Aug 22", "18‚Äì22 de agosto"],
  ["Aug 25 - Aug 29", "25‚Äì29 de agosto"],
  ["Sept 1 - Sept 5", "1‚Äì5 de septiembre"],
  ["Sept 8 - Sept 12", "8‚Äì12 de septiembre"],
  ["Sept 15 - Sept 19", "15‚Äì19 de septiembre"],
  ["Sept 22 - Sept 26", "22‚Äì26 de septiembre"],
  ["Sept 29 - Oct 3", "29 de septiembre‚Äì3 de octubre"],
  ["Oct 6 - Oct 10", "6‚Äì10 de octubre"],
  ["Oct 13 - Oct 17", "13‚Äì17 de octubre"],
  ["Oct 20 - Oct 24", "20‚Äì24 de octubre"],
  ["Oct 27 - Oct 31", "27‚Äì31 de octubre"],
  ["Nov 3 - Nov 7", "3‚Äì7 de noviembre"],
  ["Nov 10 - Nov 14", "10‚Äì14 de noviembre"],
  ["Nov 17 - Nov 21", "17‚Äì21 de noviembre"],
  ["Nov 24 - Nov 28", "24‚Äì28 de noviembre"],
  ["Dec 1 - Dec 5", "1‚Äì5 de diciembre"],
  ["Dec 8 - Dec 12", "8‚Äì12 de diciembre"],
  ["Dec 15 - Dec 19", "15‚Äì19 de diciembre"],
  ["Dec 22 - Dec 26 (Winter Break)", "22‚Äì26 de diciembre (Vacaciones de invierno)"],
  ["Dec 29 - Jan 2 (Winter Break)", "29 de diciembre‚Äì2 de enero (Vacaciones de invierno)"],
  ["Jan 5 - Jan 9", "5‚Äì9 de enero"],
  ["Jan 12 - Jan 16", "12‚Äì16 de enero"],
  ["Jan 19 - Jan 23 - End of Semester 1", "19‚Äì23 de enero - Fin del semestre 1"],
  ["Jan 26 - Jan 30", "26‚Äì30 de enero"],
  ["Feb 2 - Feb 6", "2‚Äì6 de febrero"],
  ["Feb 9 - Feb 13", "9‚Äì13 de febrero"],
  ["Feb 16 - Feb 20", "16‚Äì20 de febrero"],
  ["Feb 23 - Feb 27", "23‚Äì27 de febrero"],
  ["Mar 2 - Mar 6", "2‚Äì6 de marzo"],
  ["Mar 9 - Mar 13", "9‚Äì13 de marzo"],
  ["Mar 16 - Mar 20", "16‚Äì20 de marzo"],
  ["Mar 23 - Mar 27", "23‚Äì27 de marzo"],
  ["Mar 30 - Apr 3", "30 de marzo‚Äì3 de abril"],
  ["Apr 6 - Apr 10", "6‚Äì10 de abril"],
  ["Apr 13 - Apr 17", "13‚Äì17 de abril"],
  ["Apr 20 - Apr 24", "20‚Äì24 de abril"],
  ["Apr 27 - May 1", "27 de abril‚Äì1 de mayo"],
  ["May 4 - May 8", "4‚Äì8 de mayo"],
  ["May 11 - May 15 ( Graduation Ceremony Credit Deadline - May 15)", "11‚Äì15 de mayo (Fecha l√≠mite para cr√©ditos de graduaci√≥n)"],
  ["May 18 - May 22", "18‚Äì22 de mayo"],
  ["May 25 - May 29", "25‚Äì29 de mayo"],
  ["June 1 - June 5", "1‚Äì5 de junio"],
  ["June 8 - June 12", "8‚Äì12 de junio"],
  ["June 15 - June 19", "15‚Äì19 de junio"],
  ["June 22 - June 26 - End of Semester 2", "22‚Äì26 de junio - Fin del semestre 2"]
];

   function showLanguagePrompt() {
  const calc = document.querySelector(".container");
  calc.style.opacity = 0;

  setTimeout(() => {
    calc.style.display = "none";

    document.body.classList.add("show-prompt");

    const prompt = document.getElementById("languagePrompt");
    prompt.style.display = "flex";
    
    // Force layout refresh to allow fade-in
    void prompt.offsetWidth;

    prompt.style.opacity = 1;

    // Clear fields (optional reset)
    document.getElementById("totalCredits").value = "";
    document.getElementById("startWeek").selectedIndex = 0;
    document.getElementById("endWeek").selectedIndex = 0;
    document.getElementById("skipThanksgiving").checked = false;
    document.getElementById("skipWinter").checked = false;
    document.getElementById("skipSpring").checked = false;
    document.getElementById("result").innerHTML = "";
    document.getElementById("planButtons").style.display = "none";
    lastResultData = null;
    storedPlan = {};
  }, 300);
}
    // ‚úÖ Then define the function once (not nested)
function populateWeekDropdowns() {
  const startSelect = document.getElementById("startWeek");
  const endSelect = document.getElementById("endWeek");

  if (!startSelect || !endSelect) {
    return;
  }

  startSelect.innerHTML = "";
  endSelect.innerHTML = "";

  for (let i = 0; i < weeks.length; i++) {
    const optionEN = document.createElement("option");
    optionEN.value = i + 1;
    optionEN.innerHTML = isSpanish
      ? `Semana ${i + 1}: ${weeks[i][1]}`
      : `Week ${i + 1}: ${weeks[i][0]}`;

    const optionEN2 = optionEN.cloneNode(true);

    startSelect.appendChild(optionEN);
    endSelect.appendChild(optionEN2);
  }

  // ‚úÖ Populate the 4 custom skip dropdowns
  const customWeekSelects = [
    document.getElementById("customWeek1"),
    document.getElementById("customWeek2"),
    document.getElementById("customWeek3"),
    document.getElementById("customWeek4")
  ];

  customWeekSelects.forEach(select => {
    if (!select) return;
    select.innerHTML = "";
    for (let i = 0; i < weeks.length; i++) {
      const opt = document.createElement("option");
      opt.value = i + 1;
      opt.textContent = isSpanish
        ? `Semana ${i + 1}: ${weeks[i][1]}`
        : `Week ${i + 1}: ${weeks[i][0]}`;
      select.appendChild(opt);
    }
  });
}

let storedPlan = {};

    let lastResultData = null;
    function calculateCredits() {
        
      const totalCredits = parseInt(document.getElementById("totalCredits").value);
      const startWeek = parseInt(document.getElementById("startWeek").value);
      const endWeek = parseInt(document.getElementById("endWeek").value);

            const skipThanksgiving = document.getElementById("skipThanksgiving").checked;
      const skipWinter = document.getElementById("skipWinter").checked;
      const skipSpring = document.getElementById("skipSpring").checked;

      const customSkips = [];
const selectedWeeks = new Set();
let duplicateFound = false;

for (let i = 1; i <= 4; i++) {
  const cb = document.getElementById(`customSkip${i}`);
  const sel = document.getElementById(`customWeek${i}`);
  if (cb?.checked && sel?.value) {
    const val = parseInt(sel.value);
    if (!isNaN(val)) {
      if (selectedWeeks.has(val)) {
        duplicateFound = true;
      } else {
        selectedWeeks.add(val);
        customSkips.push(val);
      }
    }
  }
}

if (duplicateFound) {
  document.getElementById("result").innerHTML = `<div class='warning'>You've selected the same week more than once in custom skip weeks. Each custom week must be different.</div>`;
  return;
}


      // Combine all skip weeks into one array
      const allSkips = [
        ...(skipThanksgiving ? [22] : []),
        ...(skipWinter ? [26, 27] : []),
        ...(skipSpring ? [41] : []),
        ...customSkips
      ];

      // Only count unique skips
      // Only count unique skip weeks that fall within the selected planning window
const uniqueSkips = [...new Set(allSkips)].filter(week => week >= startWeek && week <= endWeek);
let weeksRemaining = endWeek - startWeek + 1 - uniqueSkips.length;

      if (!totalCredits || weeksRemaining <= 0) {
        document.getElementById("result").innerText = "Please enter valid numbers.";
        return;
      }

      const weeklyAvg = (totalCredits / weeksRemaining).toFixed(2);
      const weeklyAvgNum = parseFloat(weeklyAvg);

      let suggestion = "";
      let riskLevel = "‚úÖ Low Risk";

      if (weeklyAvgNum <= 2.00) {
        suggestion = `‚úÖ You‚Äôre on track! Aim to turn in 2 credits a week to stay steady and finish on time.`;
      } else if (weeklyAvgNum > 2.00 && weeklyAvgNum <= 2.50) {
        suggestion = `‚ö†Ô∏è You‚Äôll need to do a bit more than 2 each week. Try turning in 3 credits weekly to get ahead and lower your weekly credit load.`;
        riskLevel = "‚ö†Ô∏è Medium Risk";
      } else if (weeklyAvgNum > 2.50 && weeklyAvgNum <= 2.79) {
        suggestion = `‚ö†Ô∏è You‚Äôre getting close to the weekly credit limit of 3. Try turning in 3 credits a week now so you can lower your credit load and avoid burnout later.`;
        riskLevel = "‚ö†Ô∏è Medium‚ÄìHigh Risk";
      } else if (weeklyAvgNum > 2.79 && weeklyAvgNum < 3.00) {
        suggestion = `‚ö†Ô∏è You‚Äôre getting very close to the weekly credit limit of 3. Try turning in 3 credits a week now so you can lower your credit load.`;
        riskLevel = "‚ö†Ô∏è High Risk ‚Äì Near Limit";
      } else {
        suggestion = `üö® This plan needs 3 or more credits every week without any breaks. That‚Äôs a challenging pace, and most students need extra support to manage it. Talk with your teacher to build a plan that works for you and gives you backup options.`;
        riskLevel = "üö® High Risk";
      }

      let bufferWarningKey = "";
if (endWeek === 46) {
  bufferWarningKey = "bufferWarning44";
} else if (endWeek === 45) {
  bufferWarningKey = "bufferWarning45";
} else if (endWeek > 46) {
  bufferWarningKey = "bufferWarningAfter46";
}
let bufferWarning = bufferWarningKey ? `<div class='warning'>${getText(bufferWarningKey)}</div>` : "";

      const strongStart = startWeek <= 10 ? `<p><strong>Strong Start Tip:</strong> Try completing 3 credits/week for the first 6 weeks. You can slow down later.</p>` : "";

      const oneCreditWeeks = Math.max(0, Math.min(totalCredits, weeksRemaining, weeksRemaining * 2 - totalCredits));

      const fullWeeksAt3 = Math.floor(totalCredits / 3);
      const remainder = totalCredits % 3;
      let planB = remainder === 0 ? `3 credits/week for ${fullWeeksAt3} weeks - (${fullWeeksAt3} weeks total)` : `3 credits/week for ${fullWeeksAt3} weeks + 1 week of ${remainder} credit${remainder > 1 ? 's' : ''} - (${fullWeeksAt3 + 1} weeks total)`;
      const planBWeeks = remainder === 0 ? fullWeeksAt3 : fullWeeksAt3 + 1;

      const creditsAfter3PerWeek = 3 * 8;
      const remainingCredits = Math.max(totalCredits - creditsAfter3PerWeek, 0);
      const fullWeeksAt4 = Math.floor(remainingCredits / 4);
      const remainderD = remainingCredits % 4;
      const totalWeeksD = 8 + fullWeeksAt4 + (remainderD > 0 ? 1 : 0);

let planD = `<span style='color:red'><strong>${getText("plan_d_header")}</strong></span>, ` +
  getText("then_x_weeks_of_4").replace("{x}", fullWeeksAt4);

if (remainderD > 0) {
  planD += ` ${getText("plus_1_week_of_n").replace("{n}", remainderD)}`;
}

planD += ` - ${getText("weeks_total").replace("{x}", totalWeeksD)}`;
      let planDNote = `<li>${planD}`;
if (totalWeeksD > weeksRemaining) {
  const diff = totalWeeksD - weeksRemaining;
  planDNote += ` <span style="color: red;">${getText("exceeds_weeks_by").replace("{z}", diff)}</span>`;
}
planDNote += `</li>`;

      const planAWeeks = Math.ceil(totalCredits / 2);
      let weeksOf3 = 0; // Make this available outside the if-block
     let planANote = `<li><strong>${getText("Plan A")}:</strong> ` +
  getText("credits_per_week_for_weeks")
    .replace("{x}", "2")
    .replace("{y}", planAWeeks);

const planAButton = document.querySelector('button[onclick="generatePlan(\'A\')"]');

if (planAWeeks > weeksRemaining) {
  const weeksOver = planAWeeks - weeksRemaining;
  weeksOf3 = weeksOver * 2;

  planANote += ` <span style="color: red;">${getText("exceeds_weeks_by").replace("{z}", weeksOver)}</span>`;

  if (weeksOf3 < planBWeeks) {
    // ‚úÖ Fallback is viable
    const creditsFrom3s = weeksOf3 * 3;
    const creditsRemaining = totalCredits - creditsFrom3s;
    const weeksOf2 = Math.floor(creditsRemaining / 2);
    const leftover = creditsRemaining % 2;
    const weeksOf1 = leftover > 0 ? 1 : 0;

    const segments = [];
    if (weeksOf3 > 0) segments.push(getText("weeks_of_x_credits").replace("{count}", weeksOf3).replace("{credit}", 3));
    if (weeksOf2 > 0) segments.push(getText("weeks_of_x_credits").replace("{count}", weeksOf2).replace("{credit}", 2));
    if (weeksOf1 > 0) segments.push(getText("weeks_of_x_credits").replace("{count}", 1).replace("{credit}", 1));

    planANote += `<br><em>${getText("you_need_segments").replace("{segments}", segments.join(" and "))}</em>`;

    planAButton.disabled = false;
    planAButton.title = "";
  } else {
    // ‚ùå Fallback not viable
    planAButton.disabled = true;
    planAButton.title = "Disabled: Plan A no longer works with remaining weeks left.";
  }
} else {
  // ‚úÖ Standard Plan A fits
  planAButton.disabled = false;
  planAButton.title = "";
}
planANote += `</li>`;

      let planBNote = `<li><strong>${getText("Plan B")}:</strong> ` +
  getText("credits_per_week_for_weeks")
    .replace("{x}", "3")
    .replace("{y}", fullWeeksAt3);

if (remainder > 0) {
  planBNote += ` ${getText("plus_1_week_of_n").replace("{n}", remainder)}`;
}
planBNote += ` - ${getText("weeks_total").replace("{x}", planBWeeks)}`;

if (planBWeeks > weeksRemaining) {
  const diff = planBWeeks - weeksRemaining;
  planBNote += ` <span style="color: red;">${getText("exceeds_weeks_by").replace("{z}", diff)}</span>`;
}
planBNote += `</li>`;
      let planCText = "";

if (weeklyAvgNum < 2.0) {
  planCText = isSpanish
    ? `Puedes tener hasta ${oneCreditWeeks} semana(s) de 1 cr√©dito si el resto promedia 2 o m√°s`
    : `You can afford up to ${oneCreditWeeks} week(s) at 1 credit if the rest average 2+`;
} else if (weeklyAvgNum === 2.0) {
  planCText = isSpanish
    ? `Puedes tener 0 semana(s) de 1 cr√©dito si el resto promedia 2 o m√°s`
    : `You can afford 0 week(s) at 1 credit if the rest average 2+`;
} else {
  planCText = isSpanish
    ? `Puedes tener 0 semana(s) de 1 cr√©dito`
    : `You can afford 0 week(s) at 1 credit`;
}

let planCNote = `<li><strong>${getText("Plan C")}:</strong> ${planCText}</li>`;

      const result = `
  <p><strong>${getText("Credits Needed")}:</strong> ${totalCredits}</p>
  <p><strong>${getText("Weeks Remaining")}:</strong> ${weeksRemaining}</p>
  <p><strong>${getText("Average Credits per Week")}:</strong> ${weeklyAvg}</p>
  <p><strong>${getText("Risk Level")}:</strong> ${getText(riskLevel)}</p>
  <p><strong>${getText("Suggestion")}:</strong> ${getText(suggestion)}</p>
  ${bufferWarning}
  ${startWeek <= 10 ? `<p><strong>${getText("Strong Start Tip: Try completing 3 credits/week for the first 6 weeks. You can slow down later.")}</strong></p>` : ""}
  <hr>
  <p><strong>${getText("Workflow Options")}:</strong></p>
  <ul>
    ${planANote}<br>
    ${planBNote}<br>
    ${planCNote}<br>
    ${planDNote}
  </ul>
`;

      document.getElementById("result").innerHTML = result;
      lastResultData = {
  totalCredits,
  weeksRemaining,
  weeklyAvg,
  riskLevel,
  suggestion,
  bufferWarningKey,
  strongStart: startWeek <= 10,
  planANote,
  planBNote,
  planCNote,
  planDNote
};

      // Disable Plan C button if Plan A exceeds weeks
const planCButton = document.querySelector('button[onclick="generatePlan(\'C\')"]');
if (planAWeeks > weeksRemaining) {
  planCButton.disabled = true;
  planCButton.title = "Disabled: 2 credits/week will not be enough to finish on time.";
} else {
  planCButton.disabled = false;
  planCButton.title = "";
}
      
      // Disable Plan B button if Plan B exceeds weeks
const planBButton = document.querySelector('button[onclick="generatePlan(\'B\')"]');
if (planBWeeks > weeksRemaining) {
  planBButton.disabled = true;
  planBButton.title = "Disabled: 3 credits/week plan won't fit in your remaining time.";
} else {
  planBButton.disabled = false;
  planBButton.title = "";
}

      // Disable Plan D button if Plan D exceeds weeks
const planDButton = document.querySelector('button[onclick="generatePlan(\'D\')"]');
if (totalWeeksD > weeksRemaining) {
  planDButton.disabled = true;
  planDButton.title = "Disabled: Plan D requires more weeks than you have left.";
} else {
  planDButton.disabled = false;
  planDButton.title = "";
}

  document.getElementById("planButtons").style.display = "flex";
  storedPlan = { 
        totalCredits, 
        startWeek, 
        endWeek, 
        oneCreditWeeks,
        skipWeeks: uniqueSkips
      };
    }

    function renderResult() {
  if (!lastResultData) return;

  const {
    totalCredits,
    weeksRemaining,
    weeklyAvg,
    riskLevel,
    suggestion,
    bufferWarningKey,
    strongStart,
    planANote,
    planBNote,
    planCNote,
    planDNote
  } = lastResultData;

  const bufferWarning = bufferWarningKey ? `<div class='warning'>${getText(bufferWarningKey)}</div>` : "";

  const result = `
    <p><strong>${getText("Credits Needed")}:</strong> ${totalCredits}</p>
    <p><strong>${getText("Weeks Remaining")}:</strong> ${weeksRemaining}</p>
    <p><strong>${getText("Average Credits per Week")}:</strong> ${weeklyAvg}</p>
    <p><strong>${getText("Risk Level")}:</strong> ${getText(riskLevel)}</p>
    <p><strong>${getText("Suggestion")}:</strong> ${getText(suggestion)}</p>
    ${bufferWarning}
    ${strongStart ? `<p><strong>${getText("Strong Start Tip: Try completing 3 credits/week for the first 6 weeks. You can slow down later.")}</strong></p>` : ""}
    <hr>
    <p><strong>${getText("Workflow Options")}:</strong></p>
    <ul>
      ${planANote}<br>
      ${planBNote}<br>
      ${planCNote}<br>
      ${planDNote}
    </ul>
  `;

  document.getElementById("result").innerHTML = result;
}

   function generatePlan(type) {
  const { totalCredits, startWeek, endWeek, oneCreditWeeks, skipWeeks } = storedPlan;

// Step 1: Mark all weeks with skip status
let allWeeks = [];
for (let w = startWeek; w <= endWeek; w++) {
  const isSkipped = skipWeeks.includes(w);
  allWeeks.push({ week: w, skip: isSkipped });
}

// Step 2: Pull only usable weeks (not skipped) for assigning credits
const usableWeeks = allWeeks.filter(w => !w.skip);
const usableWeekCount = usableWeeks.length;

  // Determine credit distribution per plan
  let distribution = [];
  if (type === 'A') {
  const neededWeeks = Math.ceil(totalCredits / 2);
  if (neededWeeks <= usableWeekCount) {
    distribution = [
      ...Array(neededWeeks).fill(2),
      ...Array(usableWeekCount - neededWeeks).fill(0)
    ];
  } else {
    const weeksOver = neededWeeks - usableWeekCount;
    const weeksOf3 = weeksOver * 2; // ‚úÖ Each 3-credit week gives 1 extra credit
    const creditsFrom3s = weeksOf3 * 3;
    const remainingCredits = totalCredits - creditsFrom3s;
    const weeksOf2 = Math.floor(remainingCredits / 2);
const leftover = remainingCredits % 2;
const weeksOf1 = leftover > 0 ? 1 : 0;
const fillerZeros = usableWeekCount - weeksOf3 - weeksOf2 - weeksOf1;

distribution = [
  ...Array(weeksOf3).fill(3),
  ...Array(weeksOf2).fill(2),
  ...Array(weeksOf1).fill(1),
  ...Array(Math.max(0, fillerZeros)).fill(0)
];
  }
}
  if (type === 'B') {
    const full3 = Math.floor(totalCredits / 3);
    const rem = totalCredits % 3;
    distribution = [...Array(full3).fill(3)];
    if (rem > 0) distribution.push(rem);
  }
  if (type === 'C') {
    const twoWeeks = usableWeekCount - oneCreditWeeks;
    distribution = [...Array(twoWeeks).fill(2), ...Array(oneCreditWeeks).fill(1)];
  }
  if (type === 'D') {
    const part1 = Array(8).fill(3);
    const rem = totalCredits - 24;
    const w4 = Math.floor(rem / 4);
    const r4 = rem % 4;
    const part2 = Array(w4).fill(4);
    if (r4 > 0) part2.push(r4);
    distribution = [...part1, ...part2];
  }

  // Apply distribution to usable weeks
  usableWeeks.forEach((w, i) => w.credits = distribution[i] ?? 0);
  // Add 0 credits for skipped weeks
  allWeeks = allWeeks.map(w => {
  if (w.skip) {
    return { ...w, credits: 0 };
  } else {
    const next = usableWeeks.shift();
    return { ...w, credits: next?.credits ?? 0 };
  }
});

  // Render table
  const table = `
<html><head><title>Plan ${type} Credit Tracker</title>
  <style>
    body {
      font-family: Arial;
      padding: 20px;
    }
    table {
      border-collapse: collapse;
      width: 100%;
    }
    td, th {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }
    input[type="checkbox"] {
      transform: scale(1.2);
      margin-right: 6px;
    }
    .credit-cell {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .skip-row {
      background-color: #ffd6d6;
    }
    /* ‚úÖ Print Button Styling */
    #printBtn {
  position: fixed;
  top: 16px;
  right: 16px;
  background-color: white;
  color: black;
  border: 1px solid black;
  padding: 10px 16px;
  font-size: 1.1em;
  border-radius: 6px;
  cursor: pointer;
  z-index: 999;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  transition: background-color 0.3s, color 0.3s;
}

#printBtn:hover {
  background-color: #555;
  color: white;
}

@media print {
  #printBtn {
    display: none;
  }

  #printNotice {
    display: none;
  }
}
  </style>
</head><body>

<!-- ‚úÖ Print Button -->
<button id="printBtn" onclick="window.print()" title="Print this page">Print</button>

<div id="printNotice" style="
  margin-top: 70px;
  background: #fff3cd;
  border: 1px solid #ffeeba;
  color: #856404;
  padding: 10px 14px;
  border-radius: 6px;
  font-size: 0.95em;
  max-width: 700px;
">
  <strong>Print Tips:</strong> For best results, set your printer settings to:
  <ul style="margin-top: 6px; padding-left: 20px;">
    <li>üìÑ <strong>Margins:</strong> Default</li>
    <li>üé® <strong>Enable Background Graphics</strong></li>
  </ul>
</div>

<h2>
  Credit Tracker ‚Äì Plan ${type}
  <span style="font-weight: normal; font-size: 0.6em;"> - (Credit completion is allowed during self-selected ‚Äú0‚Äù credit weeks.)</span>
</h2>

<table>
  <tr><th>Week</th><th>Date Range</th><th>Credits</th><th colspan="4">Credits</th></tr>
  ${allWeeks.map(w => {
    const rowClass = w.skip ? ' class="skip-row"' : '';
    const row = `<td>${w.week}</td><td>${dateRanges[w.week]}</td><td>${w.credits}</td>`;
    const cells = Array(4).fill(`<td><div class="credit-cell"><input type="checkbox" /> ________</div></td>`).join('');
    return `<tr${rowClass}>${row}${cells}</tr>`;
  }).join('')}
</table>
</body></html>
`;

  const printWin = window.open("", "_blank");
  printWin.document.write(table);
  printWin.document.close();
}

    // Pressing "Enter" in any input field triggers calculateCredits
    function displayCurrentDateAndWeek() {
  const today = new Date();  // ‚úÖ define today FIRST

  const dateRanges = [
    "", "2025-07-01", "2025-07-07", "2025-07-14", "2025-07-21", "2025-07-28",
    "2025-08-04", "2025-08-11", "2025-08-18", "2025-08-25", "2025-09-01",
    "2025-09-08", "2025-09-15", "2025-09-22", "2025-09-29", "2025-10-06",
    "2025-10-13", "2025-10-20", "2025-10-27", "2025-11-03", "2025-11-10",
    "2025-11-17", "2025-11-24", "2025-12-01", "2025-12-08", "2025-12-15",
    "2025-12-22", "2025-12-29", "2026-01-05", "2026-01-12", "2026-01-19",
    "2026-01-26", "2026-02-02", "2026-02-09", "2026-02-16", "2026-02-23",
    "2026-03-02", "2026-03-09", "2026-03-16", "2026-03-23", "2026-03-30",
    "2026-04-06", "2026-04-13", "2026-04-20", "2026-04-27", "2026-05-04",
    "2026-05-11", "2026-05-18", "2026-05-25", "2026-06-01", "2026-06-08",
    "2026-06-15", "2026-06-22", "2026-06-29"
  ];

  let currentWeek = "Outside of school year";

  for (let i = dateRanges.length - 1; i > 0; i--) {
    const [year, month, day] = dateRanges[i].split("-").map(Number);
    const weekStart = new Date(year, month - 1, day); // Month is 0-indexed
    if (today >= weekStart) {
      currentWeek = i;
      break;
    }
  }

  const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
  const formattedDate = today.toLocaleDateString(isSpanish ? "es-ES" : "en-US", options);

  const label = currentWeek === "Outside of school year"
    ? (isSpanish ? `Hoy es ${formattedDate}` : `Today is ${formattedDate}`)
    : (isSpanish
        ? `üìÖ Semana actual: ${currentWeek}`
        : `üìÖ Current Week: ${currentWeek}`);

  const dateEl = document.getElementById("currentDate");
  const weekEl = document.getElementById("currentWeek");

  if (dateEl && weekEl) {
    dateEl.textContent = formattedDate;
    weekEl.textContent = label;
  }
}

    function setLanguage(spanish) {
  isSpanish = spanish;
      
      if (spanish) {
  document.body.classList.add("spanish-mode");
} else {
  document.body.classList.remove("spanish-mode");
}

  // Fade out language prompt
  const prompt = document.getElementById("languagePrompt");
  prompt.style.opacity = 0;

  // After fade-out delay, hide prompt and show calculator
  setTimeout(() => {
    prompt.style.display = "none";

    document.body.classList.remove("show-prompt");

    const calc = document.querySelector(".container");
    calc.style.opacity = 0;
    calc.style.display = "block";

    // Fade in calculator
    setTimeout(() => {
      calc.style.opacity = 1;
    }, 10);

    // Update language toggle button without flipping language again
    document.getElementById("langToggleBtn").innerHTML = isSpanish ? "English" : "Espa√±ol";

    // Refresh translations
    applyTranslations();
  }, 400); // Matches 0.4s transition time
}
    
    function applyTranslations() {
  Object.keys(translations).forEach(eng => {
    const elements = Array.from(document.querySelectorAll("*")).filter(el =>
      el.childNodes.length === 1 &&
      el.childNodes[0].nodeType === 3 &&
      (el.textContent.trim() === eng || el.textContent.trim() === translations[eng])
    );
    elements.forEach(el => {
      el.innerHTML = isSpanish ? translations[eng] : eng;
    });
  });

  const mainDisclaimerEl = document.getElementById("mainDisclaimer");
  if (mainDisclaimerEl) {
    mainDisclaimerEl.innerHTML = isSpanish
      ? translations.mainDisclaimerFull_ES
      : translations.mainDisclaimerFull;
  }

  const footerDisclaimerEl = document.getElementById("footerDisclaimer");
  if (footerDisclaimerEl) {
    footerDisclaimerEl.innerHTML = isSpanish
      ? translations.footerDisclaimerFull_ES
      : translations.footerDisclaimerFull;
  }
      
      const currentDateEl = document.getElementById("currentDate");
  if (currentDateEl) {
    const today = new Date();
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    currentDateEl.textContent = today.toLocaleDateString(isSpanish ? "es-ES" : "en-US", options);
  }

  const currentWeekEl = document.getElementById("currentWeek");
  if (currentWeekEl) {
    const startDate = new Date(new Date().getFullYear(), 6, 1); // July 1
    const today = new Date();
    const diffTime = today - startDate;
    const diffWeeks = Math.floor(diffTime / (1000 * 60 * 60 * 24 * 7)) + 1;
    currentWeekEl.textContent = isSpanish
      ? `üìÖ Semana actual: ${diffWeeks}`
      : `üìÖ Current Week: ${diffWeeks}`;
  }

  const skipBoxTitleEl = document.getElementById("skipBoxTitle");
if (skipBoxTitleEl) {
  skipBoxTitleEl.textContent = getText("Weeks You Plan to Skip (Optional):");
}

  setTimeout(() => {
    populateWeekDropdowns();
    document.getElementById("endWeek").value = "46";
  }, 0);

  renderResult();
  displayCurrentDateAndWeek();
}
    
    function toggleLanguage() {
  isSpanish = !isSpanish;
  document.getElementById("langToggleBtn").innerHTML = isSpanish ? "English" : "Espa√±ol";

  Object.keys(translations).forEach(eng => {
    const elements = Array.from(document.querySelectorAll("*")).filter(el =>
      el.childNodes.length === 1 &&
      el.childNodes[0].nodeType === 3 &&
      (el.textContent.trim() === eng || el.textContent.trim() === translations[eng])
    );
    elements.forEach(el => {
      el.innerHTML = isSpanish ? translations[eng] : eng;
    });
  });

 // ‚úÖ Add this at the very end of the script
  const currentDateEl = document.getElementById("currentDate");
  if (currentDateEl) {
    const today = new Date();
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    currentDateEl.textContent = today.toLocaleDateString(undefined, options);
  }

  const currentWeekEl = document.getElementById("currentWeek");
  if (currentWeekEl) {
    const startDate = new Date(new Date().getFullYear(), 6, 1); // July 1
    const today = new Date();
    const diffTime = today - startDate;
    const diffWeeks = Math.floor(diffTime / (1000 * 60 * 60 * 24 * 7)) + 1;
    currentWeekEl.textContent = `Week ${diffWeeks}`;
  }

  // ‚úÖ Refresh dropdowns with a small delay
  setTimeout(() => {
    populateWeekDropdowns();
    document.getElementById("endWeek").value = "46";
  }, 0);
    renderResult();  // ‚úÖ This goes here to refresh output language
    displayCurrentDateAndWeek(); // ‚úÖ Refresh current week label in the new language
}
document.addEventListener("DOMContentLoaded", () => {
  populateWeekDropdowns();
  document.getElementById("endWeek").value = "46";
  displayCurrentDateAndWeek();

  // ‚úÖ Add checkbox event listeners
  document.getElementById("skipThanksgiving").addEventListener("change", calculateCredits);
  document.getElementById("skipWinter").addEventListener("change", calculateCredits);
  document.getElementById("skipSpring").addEventListener("change", calculateCredits);
  for (let i = 1; i <= 4; i++) {
  document.getElementById(`customSkip${i}`).addEventListener("change", calculateCredits);
  document.getElementById(`customWeek${i}`).addEventListener("change", calculateCredits);
}

  // ‚úÖ Add Enter key triggers
  ["totalCredits", "startWeek", "endWeek"].forEach(id => {
    document.getElementById(id).addEventListener("keydown", function(e) {
      if (e.key === "Enter") {
        e.preventDefault(); // Prevent form submission or accidental refresh
        calculateCredits();
      }
    });
  });
});
  </script>
</body>
</html>
